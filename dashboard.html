<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KI Trading Dashboard</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0; padding: 0;
      background-color: #f8f9fa;
      color: #222;
    }
    header {
      background-color: #2e86de;
      color: white;
      padding: 1rem;
      text-align: center;
    }
    .status-bar {
      display: flex;
      justify-content: space-between;
      padding: 1rem;
      background: #dff9fb;
      border-bottom: 1px solid #ccc;
    }
    .dashboard {
      padding: 1rem;
    }
    .trade-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    .trade-table th, .trade-table td {
      padding: 0.5rem;
      border: 1px solid #ccc;
      text-align: left;
    }
    .trade-table th {
      background: #dcdde1;
    }
    .trade-table tr.buy { background-color: #d4efdf; }
    .trade-table tr.sell { background-color: #f5b7b1; }

    .controls {
      margin-top: 1rem;
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
    }

    button, select {
      padding: 0.5rem;
      font-size: 1rem;
      cursor: pointer;
    }

    .platform-btn {
      background: #95a5a6;
      color: white;
      border: none;
      border-radius: 4px;
    }

    .active {
      background: #2ecc71 !important;
    }

    .mode-toggle {
      background: #e67e22;
      color: white;
      border: none;
      border-radius: 4px;
    }

    .pdf-report {
      margin-top: 2rem;
    }

    @media (max-width: 600px) {
      .status-bar {
        flex-direction: column;
        align-items: flex-start;
      }
      .controls {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>

  <header>
    <h1>Martin's KI-Trading Dashboard</h1>
  </header>

  <div class="status-bar">
    <div><strong>KI-Modus:</strong> <span id="ki-mode">Hybridmodus</span></div>
    <button class="mode-toggle" onclick="toggleMode()">Modus umschalten</button>
  </div>

  <div class="dashboard">
    <div class="controls">
      <select id="platform-filter" onchange="filterTrades()">
        <option value="all">Alle Plattformen</option>
        <option value="ava">AvaTrade</option>
        <option value="naga">NAGA</option>
      </select>
      <button onclick="setRisk()">Risiko einstellen</button>
      <button onclick="refreshTrades()">Trades aktualisieren</button>
      <button onclick="downloadPDF()">ðŸ“„ Tagesreport herunterladen</button>
    </div>

    <table class="trade-table" id="trades-table">
      <thead>
        <tr>
          <th>Plattform</th>
          <th>Symbol</th>
          <th>Trader</th>
          <th>Richtung</th>
          <th>Lot</th>
          <th>SL/TP</th>
          <th>Status</th>
          <th>Aktion</th>
        </tr>
      </thead>
      <tbody id="trades-body">
        <!-- Dynamisch per JS -->
      </tbody>
    </table>

    <div class="pdf-report">
      <h3>ðŸ“¥ PDF-Tagesreport</h3>
      <p><a href="daily_report.pdf" download>Klicke hier zum Herunterladen</a></p>
    </div>
  </div>

  <script>
    let mode = 'Hybridmodus';

    const exampleTrades = [
      { platform: 'ava', symbol: 'EUR/USD', trader: 'KI-Bot', direction: 'buy', lot: 0.5, sl: '1.0940', tp: '1.1000', status: 'Offen' },
      { platform: 'naga', symbol: 'DAX40', trader: 'TraderX', direction: 'sell', lot: 0.2, sl: '16300', tp: '15900', status: 'Offen' },
    ];

    function toggleMode() {
      mode = (mode === 'Hybridmodus') ? 'Vollautomatik' : 'Hybridmodus';
      document.getElementById('ki-mode').textContent = mode;
    }

    function setRisk() {
      const risk = prompt('Welches Risiko (%) soll eingestellt werden?', '2');
      if (risk) alert(`Risiko wurde auf ${risk}% gesetzt.`);
    }

    function refreshTrades() {
      renderTrades(exampleTrades);
      alert('Trades wurden aktualisiert (Platzhalter)');
    }

    function filterTrades() {
      const filter = document.getElementById('platform-filter').value;
      const filtered = (filter === 'all') ? exampleTrades : exampleTrades.filter(t => t.platform === filter);
      renderTrades(filtered);
    }

    function closeTrade(symbol) {
      alert(`Trade ${symbol} wird geschlossen (Platzhalter)`);
    }

    function downloadPDF() {
      alert("PDF-Download wurde gestartet (Platzhalter)");
    }

    function renderTrades(trades) {
      const tbody = document.getElementById('trades-body');
      tbody.innerHTML = '';
      trades.forEach(t => {
        const row = document.createElement('tr');
        row.className = t.direction;
        row.innerHTML = `
          <td>${t.platform === 'ava' ? 'AvaTrade' : 'NAGA'}</td>
          <td>${t.symbol}</td>
          <td>${t.trader}</td>
          <td>${t.direction.toUpperCase()}</td>
          <td>${t.lot}</td>
          <td>${t.sl} / ${t.tp}</td>
          <td>${t.status}</td>
          <td><button onclick="closeTrade('${t.symbol}')">SchlieÃŸen</button></td>
        `;
        tbody.appendChild(row);
      });
    }

    window.onload = () => {
      renderTrades(exampleTrades);
    };
  </script>

</body>
</html>